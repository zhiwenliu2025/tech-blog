# æŠ€æœ¯åšå®¢

åŸºäº Nuxt 3 å’Œ Supabase æ„å»ºçš„ç°ä»£åŒ–æŠ€æœ¯åšå®¢ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“ æ–‡ç« å‘å¸ƒä¸ç®¡ç†
- ğŸ·ï¸ åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- ğŸ‘¤ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸ’¬ è¯„è®ºåŠŸèƒ½
- ğŸ‘ ç‚¹èµåŠŸèƒ½
- ğŸ” å…¨æ–‡æœç´¢ï¼ˆPostgreSQL å…¨æ–‡æœç´¢ï¼‰
- âœï¸ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆTiptapï¼‰
- ğŸŒ™ æš—è‰²æ¨¡å¼æ”¯æŒ
- ğŸ“± å“åº”å¼è®¾è®¡
- ğŸ”’ è¡Œçº§å®‰å…¨ç­–ç•¥ï¼ˆRLSï¼‰
- âš¡ é«˜æ€§èƒ½æœç´¢ç´¢å¼•ï¼ˆè‡ªåŠ¨ç»´æŠ¤ï¼‰

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Nuxt 3 (4.2.1)
- **UI æ¡†æ¶**: Tailwind CSS
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **è®¤è¯**: Supabase Auth
- **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨**: Tiptap
- **å›¾æ ‡**: Nuxt Icon (Heroicons, Simple Icons)
- **ä»£ç è´¨é‡**: ESLint, Prettier, Husky
- **åŒ…ç®¡ç†å™¨**: pnpm

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` æ–‡ä»¶ä¸º `.env` å¹¶å¡«å…¥ä½ çš„ Supabase é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# Supabase Configuration
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your-supabase-anon-key
SUPABASE_SERVICE_KEY=your-supabase-service-role-key

# App Configuration
NUXT_PUBLIC_APP_NAME=æŠ€æœ¯åšå®¢
NUXT_PUBLIC_APP_DESCRIPTION=åŸºäº Nuxt 3 çš„æŠ€æœ¯åšå®¢
NUXT_PUBLIC_APP_URL=http://localhost:3000
```

### 3. è®¾ç½® Supabase æ•°æ®åº“

1. åœ¨ [Supabase](https://supabase.com) åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®
2. åœ¨ Supabase æ§åˆ¶å°çš„ SQL ç¼–è¾‘å™¨ä¸­è¿è¡Œ `supabase/schema.sql` æ–‡ä»¶ä¸­çš„ SQL ä»£ç 
3. åœ¨ Supabase æ§åˆ¶å°çš„ Authentication > Settings ä¸­é…ç½®ä½ çš„ç½‘ç«™ URL

### 4. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰

è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼Œæ’å…¥æµ‹è¯•æ•°æ®å¹¶éªŒè¯å…¨æ–‡æœç´¢åŠŸèƒ½ï¼š

```bash
node scripts/init-db.js
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹ä½ çš„åšå®¢ã€‚

## é¡¹ç›®ç»“æ„

```
tech-blog/
â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ main.css        # Tailwind CSS ä¸»æ ·å¼æ–‡ä»¶
â”œâ”€â”€ components/             # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ AppHeader.vue       # ç½‘ç«™å¤´éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ AppFooter.vue       # ç½‘ç«™åº•éƒ¨
â”‚   â”œâ”€â”€ BlogPostCard.vue    # æ–‡ç« å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ BlogContentRenderer.vue # æ–‡ç« å†…å®¹æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ MarkdownEditor.vue  # Markdownç¼–è¾‘å™¨
â”‚   â””â”€â”€ Toast.vue           # æç¤ºæ¶ˆæ¯ç»„ä»¶
â”œâ”€â”€ composables/            # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useBlogPosts.ts     # åšå®¢æ–‡ç« ç›¸å…³æ“ä½œï¼ˆåŒ…å«å…¨æ–‡æœç´¢ï¼‰
â”‚   â”œâ”€â”€ useSupabase.ts      # Supabaseè®¤è¯ç›¸å…³
â”‚   â””â”€â”€ useToast.ts         # æç¤ºæ¶ˆæ¯ç®¡ç†
â”œâ”€â”€ layouts/                # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ default.vue         # é»˜è®¤å¸ƒå±€
â”œâ”€â”€ pages/                   # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ index.vue           # é¦–é¡µ
â”‚   â”œâ”€â”€ blog/                # åšå®¢ç›¸å…³é¡µé¢
â”‚   â”‚   â”œâ”€â”€ index.vue        # åšå®¢åˆ—è¡¨é¡µ
â”‚   â”‚   â”œâ”€â”€ [slug].vue       # æ–‡ç« è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ create.vue       # åˆ›å»ºæ–‡ç« 
â”‚   â”‚   â””â”€â”€ edit/[id].vue    # ç¼–è¾‘æ–‡ç« 
â”‚   â”œâ”€â”€ category/[slug].vue # åˆ†ç±»é¡µé¢
â”‚   â”œâ”€â”€ auth/login.vue       # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ admin.vue            # ç®¡ç†åå°
â”‚   â”œâ”€â”€ profile.vue          # ç”¨æˆ·èµ„æ–™
â”‚   â”œâ”€â”€ about.vue            # å…³äºé¡µé¢
â”‚   â””â”€â”€ contact.vue          # è”ç³»é¡µé¢
â”œâ”€â”€ middleware/             # è·¯ç”±ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.ts              # è®¤è¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ admin.ts             # ç®¡ç†å‘˜ä¸­é—´ä»¶
â”œâ”€â”€ plugins/                 # Nuxt æ’ä»¶
â”‚   â””â”€â”€ init-profile.client.ts # ç”¨æˆ·èµ„æ–™åˆå§‹åŒ–
â”œâ”€â”€ scripts/                 # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ init-db.js          # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ clear-db.js         # æ•°æ®åº“æ¸…ç†è„šæœ¬
â”œâ”€â”€ server/                  # æœåŠ¡å™¨API
â”‚   â””â”€â”€ api/                 # APIè·¯ç”±
â”œâ”€â”€ supabase/                # Supabaseç›¸å…³
â”‚   â””â”€â”€ schema.sql          # æ•°æ®åº“Schemaï¼ˆåŒ…å«å…¨æ–‡æœç´¢ï¼‰
â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ blog.ts             # åšå®¢ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ database.types.ts   # æ•°æ®åº“ç±»å‹
â”œâ”€â”€ nuxt.config.ts          # Nuxté…ç½®
â”œâ”€â”€ tailwind.config.js       # Tailwindé…ç½®
â”œâ”€â”€ package.json            # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## å¯ç”¨è„šæœ¬

### å¼€å‘ç›¸å…³

- `pnpm dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `pnpm build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `pnpm generate` - ç”Ÿæˆé™æ€ç½‘ç«™
- `pnpm preview` - é¢„è§ˆç”Ÿäº§æ„å»º

### ä»£ç è´¨é‡

- `pnpm lint` - è¿è¡Œ ESLint æ£€æŸ¥
- `pnpm lint:fix` - è‡ªåŠ¨ä¿®å¤ ESLint é”™è¯¯
- `pnpm format` - æ ¼å¼åŒ–ä»£ç 
- `pnpm type-check` - TypeScript ç±»å‹æ£€æŸ¥

### æ•°æ®åº“è„šæœ¬

- `node scripts/init-db.js` - åˆå§‹åŒ–æ•°æ®åº“å¹¶æ’å…¥æµ‹è¯•æ•°æ®
- `node scripts/clear-db.js` - æ¸…ç†æ•°æ®åº“æ•°æ®

## æ ¸å¿ƒåŠŸèƒ½

### å…¨æ–‡æœç´¢

é¡¹ç›®å®ç°äº†åŸºäº PostgreSQL å…¨æ–‡æœç´¢çš„é«˜æ€§èƒ½æœç´¢åŠŸèƒ½ï¼š

- è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤æœç´¢å‘é‡
- æ”¯æŒæ ‡é¢˜ã€æ‘˜è¦ã€å†…å®¹å’Œæ ‡ç­¾çš„å…¨æ–‡æœç´¢
- ç›¸å…³æ€§æ’åºï¼ˆæ ‡é¢˜æƒé‡æœ€é«˜ï¼‰
- GIN ç´¢å¼•ä¼˜åŒ–æœç´¢æ€§èƒ½
- æœç´¢å‘é‡åœ¨æ•°æ®æ’å…¥å’Œæ›´æ–°æ—¶è‡ªåŠ¨ç»´æŠ¤

### æ–‡ç« ç®¡ç†

- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ–‡ç« 
- æ–‡ç« å‘å¸ƒçŠ¶æ€æ§åˆ¶
- åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- å°é¢å›¾ç‰‡æ”¯æŒ
- Markdown æ ¼å¼æ”¯æŒ

### ç”¨æˆ·ç³»ç»Ÿ

- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- ç”¨æˆ·èµ„æ–™ç®¡ç†
- ç®¡ç†å‘˜æƒé™æ§åˆ¶
- è¡Œçº§å®‰å…¨ç­–ç•¥ï¼ˆRLSï¼‰

### äº’åŠ¨åŠŸèƒ½

- æ–‡ç« è¯„è®º
- æ–‡ç« ç‚¹èµ
- è¯„è®ºå’Œç‚¹èµæ•°é‡ç»Ÿè®¡

## éƒ¨ç½²

### Vercel éƒ¨ç½²

1. å°†ä»£ç æ¨é€åˆ° GitHub
2. åœ¨ [Vercel](https://vercel.com) å¯¼å…¥é¡¹ç›®
3. åœ¨ Vercel æ§åˆ¶å°æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   - `SUPABASE_URL`
   - `SUPABASE_KEY`
   - `SUPABASE_SERVICE_KEY`
4. éƒ¨ç½²é¡¹ç›®

### å…¶ä»–å¹³å°

æœ¬é¡¹ç›®å¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•æ”¯æŒ Node.js çš„å¹³å°ï¼Œå¦‚ Netlifyã€Herokuã€AWS ç­‰ã€‚

## æ•°æ®åº“

### è¡¨ç»“æ„

- `blog_posts` - åšå®¢æ–‡ç« è¡¨ï¼ˆåŒ…å«å…¨æ–‡æœç´¢å‘é‡ï¼‰
- `profiles` - ç”¨æˆ·èµ„æ–™è¡¨
- `comments` - è¯„è®ºè¡¨
- `likes` - ç‚¹èµè¡¨

### å…¨æ–‡æœç´¢

æ•°æ®åº“ä½¿ç”¨ PostgreSQL çš„å…¨æ–‡æœç´¢åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

- `blog_posts_search_vector()` å‡½æ•° - ç”Ÿæˆæœç´¢å‘é‡
- `search_blog_posts()` å‡½æ•° - æ‰§è¡Œæœç´¢å¹¶è¿”å›ç›¸å…³æ€§æ’åºç»“æœ
- GIN ç´¢å¼• - ä¼˜åŒ–æœç´¢æ€§èƒ½

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ `supabase/schema.sql` æ–‡ä»¶ã€‚

## å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Node.js 16.x æˆ–æ›´é«˜ç‰ˆæœ¬
- pnpm åŒ…ç®¡ç†å™¨
- Supabase è´¦æˆ·

### å¼€å‘æµç¨‹

1. å…‹éš†é¡¹ç›®
2. å®‰è£…ä¾èµ–ï¼š`pnpm install`
3. é…ç½®ç¯å¢ƒå˜é‡
4. åˆå§‹åŒ–æ•°æ®åº“ï¼šè¿è¡Œ `supabase/schema.sql`
5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`pnpm dev`

## æ–‡æ¡£

æ›´å¤šè¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼š

- [æŠ€æœ¯æ ˆæ–‡æ¡£](./doc/Nuxt3æŠ€æœ¯æ ˆæ–‡æ¡£.md) - è¯¦ç»†çš„æŠ€æœ¯æ ˆå’Œæ¶æ„è¯´æ˜

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT
