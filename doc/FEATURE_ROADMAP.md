# 技术博客功能路线图

## 📊 当前已实现功能

✅ **核心功能**

- 文章发布与管理（创建、编辑、删除）
- 分类和标签系统
- 用户认证系统
- 评论功能
- 点赞功能
- 全文搜索（PostgreSQL）
- 富文本编辑器（Tiptap）
- 暗色模式
- 响应式设计
- PWA 支持
- 移动端优化
- 分享功能
- 上一篇/下一篇导航
- 阅读时间计算
- 用户资料管理
- 管理员后台

---

## 🚀 高优先级功能（建议优先实现）

### 1. **阅读量统计** ⭐⭐⭐⭐⭐

**重要性**: 极高 | **难度**: 低 | **影响**: 高

**功能描述**:

- 记录每篇文章的阅读量
- 显示在文章卡片和详情页
- 支持热门文章排序

**实现要点**:

- 在 `blog_posts` 表添加 `view_count` 字段
- 文章详情页加载时自动增加阅读量
- 使用防抖避免重复计数
- 支持按阅读量排序

**数据库变更**:

```sql
ALTER TABLE blog_posts ADD COLUMN view_count INTEGER DEFAULT 0;
CREATE INDEX blog_posts_view_count_idx ON blog_posts(view_count DESC);
```

---

### 2. **RSS 订阅** ⭐⭐⭐⭐⭐

**重要性**: 极高 | **难度**: 中 | **影响**: 高

**功能描述**:

- 生成 RSS Feed
- 支持 RSS 阅读器订阅
- 自动更新最新文章

**实现要点**:

- 创建 `/rss.xml` 路由
- 使用 Nuxt 3 的 server API
- 包含文章标题、摘要、发布时间等
- 支持分类和标签过滤的 RSS

**技术实现**:

- 使用 `server/api/rss.xml.ts` 生成 XML
- 遵循 RSS 2.0 标准
- 添加缓存机制

---

### 3. **文章目录（TOC）** ⭐⭐⭐⭐

**重要性**: 高 | **难度**: 中 | **影响**: 中

**功能描述**:

- 自动生成文章目录
- 固定侧边栏显示
- 点击跳转到对应章节
- 滚动时高亮当前章节

**实现要点**:

- 解析 Markdown/HTML 中的标题
- 生成锚点链接
- 监听滚动位置
- 移动端可折叠显示

**技术实现**:

- 使用 `marked` 或 `remark` 解析标题
- 使用 `IntersectionObserver` 监听滚动
- 创建 `TableOfContents.vue` 组件

---

### 4. **相关文章推荐** ⭐⭐⭐⭐

**重要性**: 高 | **难度**: 中 | **影响**: 高

**功能描述**:

- 基于标签和分类推荐相似文章
- 显示在文章详情页底部
- 提高用户停留时间

**实现要点**:

- 基于标签匹配度计算相似度
- 考虑分类相关性
- 排除当前文章
- 限制推荐数量（3-5篇）

**算法思路**:

1. 获取当前文章的标签和分类
2. 查找有相同标签的文章
3. 按标签匹配数量排序
4. 相同标签数时，优先显示同分类文章

---

### 5. **代码复制功能** ⭐⭐⭐⭐

**重要性**: 高 | **难度**: 低 | **影响**: 中

**功能描述**:

- 代码块右上角显示复制按钮
- 一键复制代码到剪贴板
- 复制成功后显示提示

**实现要点**:

- 使用 `navigator.clipboard` API
- 为所有 `<pre><code>` 添加复制按钮
- 添加复制成功动画
- 移动端友好

**技术实现**:

- 创建 `CodeBlock.vue` 组件
- 使用 `@nuxtjs/markdown` 或自定义渲染器
- 添加 `copy-to-clipboard` 功能

---

### 6. **文章归档页面** ⭐⭐⭐

**重要性**: 中 | **难度**: 低 | **影响**: 中

**功能描述**:

- 按年月归档文章
- 显示每月文章数量
- 支持快速浏览历史文章

**实现要点**:

- 创建 `/archive` 页面
- 按 `published_at` 分组
- 使用折叠面板展示
- 显示文章标题和发布时间

**页面结构**:

```
2024年
  ├─ 12月 (5篇)
  ├─ 11月 (8篇)
  └─ 10月 (3篇)
2023年
  └─ ...
```

---

### 7. **标签云** ⭐⭐⭐

**重要性**: 中 | **难度**: 低 | **影响**: 中

**功能描述**:

- 可视化展示所有标签
- 标签大小反映使用频率
- 点击跳转到标签页面

**实现要点**:

- 统计每个标签的使用次数
- 使用 CSS 或 Canvas 渲染
- 支持按使用频率排序
- 响应式布局

**技术实现**:

- 创建 `TagCloud.vue` 组件
- 使用 `wordcloud` 库或纯 CSS
- 添加悬停效果

---

## 🎯 中优先级功能

### 8. **文章收藏/书签** ⭐⭐⭐

**重要性**: 中 | **难度**: 中 | **影响**: 中

**功能描述**:

- 用户收藏喜欢的文章
- 在个人中心查看收藏列表
- 支持取消收藏

**数据库变更**:

```sql
CREATE TABLE bookmarks (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  post_id UUID REFERENCES blog_posts(id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, post_id)
);
```

---

### 9. **阅读进度条** ⭐⭐⭐

**重要性**: 中 | **难度**: 低 | **影响**: 低

**功能描述**:

- 文章顶部显示阅读进度
- 实时更新进度百分比
- 提升阅读体验

**实现要点**:

- 使用 `IntersectionObserver` 或滚动事件
- 计算已滚动内容占比
- 固定在页面顶部
- 移动端友好

---

### 10. **热门文章** ⭐⭐⭐

**重要性**: 中 | **难度**: 低 | **影响**: 中

**功能描述**:

- 基于阅读量、点赞数、评论数计算热度
- 在首页或侧边栏显示
- 定期更新

**热度算法**:

```
热度 = (阅读量 × 0.3) + (点赞数 × 0.4) + (评论数 × 0.3)
```

---

### 11. **文章草稿自动保存** ⭐⭐⭐

**重要性**: 中 | **难度**: 中 | **影响**: 中

**功能描述**:

- 编辑文章时自动保存草稿
- 防止内容丢失
- 支持恢复草稿

**实现要点**:

- 使用 `localStorage` 或数据库
- 定时保存（如每30秒）
- 显示保存状态提示
- 支持手动保存

---

### 12. **作者页面** ⭐⭐⭐

**重要性**: 中 | **难度**: 低 | **影响**: 中

**功能描述**:

- 展示作者所有文章
- 显示作者简介和统计信息
- 支持关注功能（可选）

**页面路径**: `/author/[id]` 或 `/@[username]`

---

### 13. **搜索历史** ⭐⭐

**重要性**: 低 | **难度**: 低 | **影响**: 低

**功能描述**:

- 保存用户搜索记录
- 显示最近搜索
- 快速重新搜索

**实现要点**:

- 使用 `localStorage` 存储
- 限制历史记录数量（如10条）
- 支持清除历史

---

## 🔮 低优先级功能（可选）

### 14. **文章版本历史**

- 记录文章编辑历史
- 支持版本对比
- 支持回滚到历史版本

### 15. **文章系列**

- 将相关文章组织成系列
- 显示系列导航
- 系列封面和描述

### 16. **订阅通知**

- 新文章发布邮件通知
- RSS 订阅提醒
- 评论回复通知

### 17. **导出功能**

- 导出为 PDF
- 导出为 Markdown
- 批量导出

### 18. **评论回复**

- 支持回复评论
- 评论树形结构
- @ 提及用户

### 19. **文章统计面板**

- 字数统计
- 阅读时间预估
- 代码行数统计
- 图片数量统计

### 20. **SEO 增强**

- 结构化数据（JSON-LD）
- Open Graph 优化
- Twitter Cards
- Sitemap 自动生成

### 21. **多语言支持**

- i18n 国际化
- 文章多语言版本
- 语言切换

### 22. **文章置顶**

- 管理员可置顶文章
- 在列表页优先显示
- 支持多个置顶文章

---

## 📋 实现优先级建议

### 第一阶段（核心功能）

1. ✅ 阅读量统计
2. ✅ RSS 订阅
3. ✅ 文章目录（TOC）
4. ✅ 相关文章推荐

### 第二阶段（用户体验）

5. ✅ 代码复制功能
6. ✅ 文章归档页面
7. ✅ 标签云
8. ✅ 热门文章

### 第三阶段（高级功能）

9. ✅ 文章收藏/书签
10. ✅ 阅读进度条
11. ✅ 文章草稿自动保存
12. ✅ 作者页面

---

## 💡 技术实现建议

### 阅读量统计

- 使用数据库触发器或应用层逻辑
- 考虑使用 Redis 缓存减少数据库压力
- 防刷机制（IP + User-Agent）

### RSS 订阅

- 使用 Nuxt 3 Server API
- 遵循 RSS 2.0 标准
- 添加适当的缓存头

### 文章目录

- 使用 `marked` 或 `remark` 解析
- `IntersectionObserver` 监听滚动
- 平滑滚动动画

### 相关文章推荐

- 基于标签匹配算法
- 考虑使用向量相似度（可选）
- 缓存推荐结果

---

## 📝 注意事项

1. **性能优化**: 所有新功能都要考虑性能影响
2. **用户体验**: 确保移动端体验良好
3. **SEO 友好**: 新页面要支持 SEO
4. **可访问性**: 遵循 WCAG 标准
5. **数据迁移**: 数据库变更要考虑数据迁移

---

## 🔗 相关资源

- [RSS 2.0 规范](https://www.rssboard.org/rss-specification)
- [JSON-LD 结构化数据](https://schema.org/)
- [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)
